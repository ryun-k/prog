<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="information">
	<!-- 자주 사용하는 SQL문 -->	
	<sql id="isShow">
		upper(i_IsShow)='Y' 
	</sql>
	
	
	<!-- 총 데이터 개수 조회 쿼리 -->
	<select id="totalCount" resultType="int">
		SELECT
		    COUNT(*) AS CNT
		FROM
		    INFORMATION
		WHERE
			<include refid="isShow"/>
	</select>
	
	<!-- 목록 -->
	<select id="informationList" resultType="informationVO" parameterType="informationVO">
		select
		    I_NO            as no,
		    I_TITLE         as title,
		    I_WRITEDATE     as writeDate,
		    I_WRITER		as writer,
		    I_HIT           as hit
		from 
			INFORMATION
	</select>
	
	<!-- 데이터입력 쿼리문  -->                   
	<insert id="insertInformation" parameterType="informationVO">
	  <selectKey keyProperty="no" resultType="int" order="BEFORE">
		SELECT NVL(MAX(I_No),0)+1 FROM INFORMATION
 	 </selectKey>      
		INSERT INTO	INFORMATION
		VALUES( #{no},#{title},#{body},#{writer},SYSDATE,0,0,'Y')
	</insert>
	
	<!-- 파일정보 데이터입력 쿼리문 -->
	<insert id="insertimageInfo" parameterType="informationVO">
	INSERT INTO	imageInfo
	VALUES(	(SELECT NVL(MAX(fi_No),0)+1 FROM imageInfo),
	#{oriNo},#{path},#{oriName},#{saveName},#{len})
	</insert>
	
	
</mapper>